<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>D3 and Scalable Vector Graphics</title>

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.min.css" />
    <style>
        div {
            clear: left;
        }
    </style>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js"></script>

</head>

<body>
    <h1>Data Visualisation</h1>
    <img src="data:data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABGlBMVEX///8As9iHvSakTpj/zxXnG0gAAFxPQJLudBhEvt2OwEiGvCEAAFpIOI//0jb/0xfoOVrqWnGSirjnEEMAAFH6+v1WVn0AAEI9PWoLC2AAsuAAAFWSkq7lAErzdwCtrcEAAEqOvgAAudwtLWnExyZJSXx9fZ98uyb0bRbDY3eeSp3j4+0cHGOdUZ2rQ5Ls3uqi2usAAEg/LIr/2Q3AnidJuK1gVJqdPZBvhrnV1eJ7wybTN2zYMWSZMoxLuLBJuKiJiafDw9KhobnyijnxgjvweT87O3Fqao/g4OoAAD3ran7mIV3zlU7NzlnvdUHPNXHYXYHLWnPFnwWinMI3I4eIf7K65vF1x7tvb5EhIWI1NW8SEl1dXYPFxc/NPuX9AAAHuklEQVR4nO3beX/bNBgH8HaDcnkcq9OsU4rNSsNYysDbgIVrsWFpxn0N0i68/7eB5yS2JMu2rkeS89HvT09R890jW0fdvT0fHx8fHx8fHx8fHx8fHx9WfnxXLT/9/LZqfoEVvneolJPvH76imA/fhBa+qhAdwI9cFmoBvuWwUAvwmsPCkx90AB0W6qmgw0JNFXRXqKuCzgq1VdBVoUagm0KdQCeFWoEuCvUCHRRqBron1A10Tqgd6JpQP9Ax4clT7UC3hAAVdEsIAnRJCAN0SAhxDzolhAI6IwQDuiKEAzoiBAS6ITz5FQ7ohBCygk4IYYEOCEGHqAtCaKB14eHTh+8oph1oW3j428fvv66Uu4/agZaFh19/ck+NePfRV+1Au8IceP26ErEbaFVYAJWIHECbwg1QgcgDtCgsgdJELqA9IQaUJPIBrQkJoBSRE2hLSAEliLxAS8IaUJjIDbQjPPymBhQk8gOtCBkVFCQKAG0ImRUUIooALQgbKihAFAKaF7YAOYliQOPCViAXURBoWth4D3ITRYGGhZ3ATqIw0KyQA9hBFAcaFXIBW4kSQJNCTmALUQZoUMgNbCRKAc0JBYANRDmgMaEQkEmUBJoSCgIZRFmgIaEwsEaUBpoRSgApojzQiFAKSBAVgCaEkkCMqAI0IJQGlkQloAGhPHBDVAPCC1WABVERCC78/Z4KMCf+8acaUKPwrwHr6qdfqgnvP/78A1eEN79gXlYj3n985/Z3akSNwgf6iTlwf1+RqFF444ZuYgFUJeoUvqaZuAHmRJV7UatQL7EEqhH1ChuJ3yoBc+ITaaJmob4qEkCVe1G3UBeRAioQtQv1EGtAeaJ+oQ4iAyhNBBCqE5lA2ScqhFCV2ACUrCKIUI3YCJSrIoxQhdgClCICCeWn/lagzNQPJcyJUvvFDqDEvQgmlBuonUBxIpxQpoocQGEioFC8ilxAUSKkUJTICRR8ooIKxYjcQLEqwgpFiAJAoSoCC/mJQkARIrSQd+oXBApM/eBCvklDGMh/L8ILeQaqBJCbaEDYXUUpIC/RhLCripJATqIRYTtRGsj3RDUjbCMqALmqaEjYTFQC8lTRlLDxcaMG5CAaEz64yfzUZ2q+/e6p35SwCXhbWdhVRUNCsAp2E80IASvYSTQiBK1gF9GEEBzYSjQgBB6iXUR4oYEKFsSmSQNcaKSCbURooaEKthCBhcYqWBCZ9yKs0GAFG4mgQqMVbCJCCg1XsIEIKLQAZBHhhMaHaAMRTGilggWRmjSghJYqyCACCa1VsE6EEVqsYEHE70UQodUK0kQIoeUKUkQAofUKkkT9QieAGFG70IEhShJ1Cx2pYEFcTxqahc5UsCLqFTpUwZKoVehUBQtifi/qFDpWwQ1Ro/Bv1yq4IWoTPn/OBtr0FcRruoQp8+o/d96wnX91CX18fHx8fHx8fHxYGQymaTqdMN8INPgtjk6ZuRxTDRdnVFazqO27D7KjIInjME6S87MRY9k/ma9/0nyi01PPMgzYSSKyYYyoBgiFw3nE7nVvMB6GwcE2AYrjMQ053XSIbkG4qhxV34MMGpFfechqFISXU1avaYjopuGcalP2YU2YEe3Ywvz7JVm90yxhNDylGh33RHhwEI/oPqOY1d8F1cq+kGeUFkmox8iCUcF8lNK1ti4MeWuYf0fymXpVdYnCMETrWzJe2BYGMZHklPzalRCtG2CPSvI/Iy3HKEKzKI2yZRDnyIT+yaaFwdmEDNWuFKLR9GXS7FZYEl+wejwIyyl1Ojse0vOrBWF7u1IYllNg9UCJsSljsIWTjxZ6jPZCuDfaTnr4MJ1u3XHHaq0Pwr0tBi2ra9GmhsFVx0/uhXC1KWJwVF3Lwvo1ZnohnG2F2IosY1xjphfCEUOzHaW7cR+OUf3D6VbY1WMvhPPNh9GquraoJvzT+hSBpQ/CcgGKZljL83KxE8QXLbvbPgjn5eoFX3uPqrVOvsJrNrovnMzLXS6x5hxgwtw4vGgYq8aFVxGe2rlKtS5dFg2yVbX0RuSak9oeonjJrKP5vUWIZ0hva7G9RdEAYbuumBKMiSrmn0hGjJnD8v4wOKbatewPw9omf0xv8sMX9eMc6ztgql2zkHVWFsXUSVQQ145zeiNEc9baZbKijbXjnL4I41XD4my6SkgjfQDbC2EQHjcdCedZLMlTU2qhal6I8MRLql0lDLZtwmdnLb6XmcyGmJE6TzQuvBzjqT0eS2FwtG4xy1KOX7kMxkk1SBJiVnF/TcOZRVASyY/ujHBvUC7F8S3ILgmrs6ngEr+8Q0LsaYbfubskLA82gl0VpjsvLI9QidP/XRIumQeMPRYuqO1ieTZF7pT7K5wl8a0MO7mYlvNh+B/ezviq7ficzJz4OgJCVLx7cTmOpovJZBGtqt0wItqZX3nTr5uQWwFu4WL9WAnQ5jwE+4XwjGhoffdEnb5wC6OwqUOyhP0Vjmtv0mySkMO+v8J5Q4e19252TMh4sci+kNyvDp5xCqdhjOg+g5jxS5ryH4GF2RCxE1JvaV2F6+vDzlcJ0/FVkjfe7Hzzh2pyxvqLpHGy7jCpvaWhOemoIdQZxSBbX+Z6V3KQji7m5/mEgY7ny6aXNKN1h+KrQB8fHx8fHx8fHx8fHx+f/wHD51N14OTfTgAAAABJRU5ErkJggg==" alt="Description de l'image">

    <h2>DC Scatter Plot</h2>

    <div>
        <h3>Transactions Per Date, colour coded by person</h3>
        <div id="scatter-plot"></div>
    </div>

    <script>
        queue()
            .defer(d3.json, "data/transactions.json")
            .await(makeGraphs);

        function makeGraphs(error, transactionsData) {
            var ndx = crossfilter(transactionsData);
            var parseDate = d3.time.format("%d/%m/%Y").parse;
            transactionsData.forEach(function(d) {
                d.date = parseDate(d.date);
            });
            var dateDim = ndx.dimension(function(d) {
                return d.date;
            });
            var tradeColors = d3.scale.ordinal()
                .domain(["Alice", "Tom", "Bob"])
                .range(["red", "green", "blue"]);
            var minDate = dateDim.bottom(1)[0].date;
            var maxDate = dateDim.top(1)[0].date;
            var spendDim = ndx.dimension(function(d) {
                return [d.date, d.spend, d];
            });
            var spendGroup = spendDim.group();
            var spend_chart = dc.scatterPlot("#scatter-plot");
            spend_chart
                .width(768)
                .height(480)
                .x(d3.time.scale().domain([minDate, maxDate]))
                .brushOn(false)
                .symbolSize(8)
                .clipPadding(10)
                .yAxisLabel("Amount Spent")
                .title(function(d) {
                    return d.key[2].name + " spent " + d.key[2].spend + " in store " + d.key[2].store;
                })
                .colorAccessor(function(d) {
                    return d.key[2].name;
                })
                .colors(tradeColors)
                .dimension(spendDim)
                .group(spendGroup);
            dc.renderAll();
        }
    </script>
</body>

</html>
